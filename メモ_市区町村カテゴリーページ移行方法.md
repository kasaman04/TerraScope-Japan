# 〇〇市モーダルから、カテゴリーページ移行方法

## URLパターンルール
**基本構造：**
```
/ja/blog/{県名}/{市名}/
```

**具体例：**
- 北海道札幌市: `/ja/blog/hokkaido/sapporo/`
- 北海道函館市: `/ja/blog/hokkaido/hakodate/`
- 東京都渋谷区: `/ja/blog/tokyo/shibuya/`
- 大阪府大阪市: `/ja/blog/osaka/osaka/`
- 京都府京都市: `/ja/blog/kyoto/kyoto/`
- 神奈川県横浜市: `/ja/blog/kanagawa/yokohama/`

## ユーザーフロー
1. **都道府県ページにアクセス** (例: `/ja/blog/hokkaido/`)
2. **市区町村カードをクリック** → モーダルが開く
3. **「📖 詳しい記事を見る」をクリック** → `pageUrl`で指定されたURLに遷移
4. **市区町村専用カテゴリーページが表示** → 8カテゴリーの生活情報

## 実装要件

### ファイル配置
```
/src/pages/ja/blog/{県名}/{市名}/index.astro
```

### BaseLayout import パス
```astro
import BaseLayout from '../../../../../layouts/BaseLayout.astro';
```
※ 深度6（blog/県名/市名からlayoutsまで）

### カテゴリー構成（8カテゴリー）
1. 🗾 地域情報
2. 🚃 アクセス  
3. 🏪 生活利便性
4. 🌏 国際対応
5. 👨‍👩‍👧‍👦 子育て・教育
6. 💰 コスト
7. 🛡️ 安全性
8. 🚀 将来性

### 画像パス
```astro
src={`${import.meta.env.BASE_URL}assets/images/prefectures/{都道府県名}.png`}
```

### URL構造
- 全リンクに `/ja/blog/{県名}/` プレフィックスを使用
- 「もっと見る」ボタン： `/ja/blog/{県名}/{カテゴリー名}/`

## 現状
- **実装済み**: 札幌市のみ (`/ja/blog/hokkaido/sapporo/`)
- **未実装**: 約300の市区町村（全てのモーダルリンクが404エラー）

## テンプレート例（札幌市ベース）

### 基本構造
```astro
---
import BaseLayout from '../../../../../layouts/BaseLayout.astro';

const title = "{市名} 記事カテゴリー一覧";
const description = "{市名}の外国人向け生活情報カテゴリー一覧";
const lang = "ja";

// 人気記事ランキング
const popularArticles = [
  {
    title: "{市名}の特徴的な生活情報",
    category: "生活利便性",
    url: "/ja/blog/{県名}/living-convenience-article-1/"
  },
  {
    title: "{市名}のアクセス情報",
    category: "アクセス", 
    url: "/ja/blog/{県名}/access-article-1/"
  },
  {
    title: "{市名}の住宅事情：家賃・光熱費",
    category: "コスト",
    url: "/ja/blog/{県名}/cost-article-1/"
  }
];
---

<BaseLayout {title} {description} {lang}>
  <div class="min-h-screen bg-gray-50 py-8">
    <div class="max-w-6xl mx-auto px-4">
      <!-- Page Header -->
      <div class="text-center mb-12">
        <h1 class="text-2xl font-bold text-gray-900 mb-2">{市名}の<span class="text-red-500">生活情報</span></h1>
        <p class="text-sm text-gray-600">外国人向けの生活情報をカテゴリー別にまとめました</p>
      </div>
      
      <!-- 8カテゴリーのセクション -->
      <!-- ... -->
    </div>
  </div>
</BaseLayout>
```

## 実装の進め方

### 優先順位
1. **主要都市**：東京（新宿、渋谷）、大阪、名古屋、福岡など
2. **県庁所在地**：各都道府県の中心都市
3. **その他市区町村**：順次展開

### 効率化のポイント
- 札幌市ページをテンプレートとして活用
- 市区町村の特色に合わせてコンテンツをカスタマイズ
- BaseLayoutのimportパスに注意（深度6）
- 画像パスは都道府県名を使用

---
**作成日**: 2025年1月22日  
**参考実装**: `/ja/blog/hokkaido/sapporo/` (札幌市)