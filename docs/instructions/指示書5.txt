ğŸš€â€¯Stepâ€¯6â€¯â€”â€¯Performance & Accessibility ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
ç›®æ¨™â€¯: Lighthouse ãƒ¢ãƒã‚¤ãƒ« & ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§å…¨ã‚«ãƒ†ã‚´ãƒª â‰¥â€¯90
ï¼ˆç‰¹ã« Performance LCPâ€¯<â€¯2.5â€¯sã€A11y â‰¥â€¯95 ã‚’å¿…é”ï¼‰

1. Lighthouse CI ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å›ã™
bash
ã‚³ãƒ”ãƒ¼ã™ã‚‹
ç·¨é›†ã™ã‚‹
pnpm add -D @lhci/cli
npx lhci autorun --collect.staticDistDir=dist
Out-of-theâ€‘box ãƒ¬ãƒãƒ¼ãƒˆ ãŒ ./.lighthouseci/ ã«å‡ºåŠ›ã•ã‚Œã‚‹

ä¸»è¦ URLï¼š/, /ja/, /services/full-report, /contact

2. å…¸å‹ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¨å¯¾å‡¦
æŒ‡æ¨™	ã‚ˆãå‡ºã‚‹åŸå› 	å¯¾ç­–
LCP / TTFB	Hero ç”»åƒã‚„ 4â€¯K å‹•ç”»ãŒé‡ã„	astro-imagetools ã§ <Image format="avif" width={1200} />
å‹•ç”»ã¯ poster + loading="lazy"
CLS	ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒé«˜ã•æœªæŒ‡å®š	class="aspect-[16/9]" ã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä¿ç•™ã‚’å›é¿
TBT / JS å®¹é‡	Swiper.js ãƒ•ãƒ«ãƒãƒ³ãƒ‰ãƒ«	import('swiper/bundle') ã® dynamic import & chunk split
A11y	ãƒœã‚¿ãƒ³ã« aria-label ç„¡	ğŸŒ è¨€èªã‚¹ã‚¤ãƒƒãƒãƒ£ãƒ¼ãƒ»ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ç­‰ã«ãƒ©ãƒ™ãƒ«è¿½åŠ 
BestÂ Practices	Mixed content / insecure links	http: ç”»åƒ URL ã‚’ https: ã«ç½®æ›

3. Astro å´ã®ç°¡æ˜“ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
3â€‘a. ç”»åƒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–
astro
ã‚³ãƒ”ãƒ¼ã™ã‚‹
ç·¨é›†ã™ã‚‹
---
import { Image } from 'astro:assets';
---
<Image src="/assets/img/full-hero.jpg" format="avif;webp" widths="[400,800,1200]" alt="Lake view" />
3â€‘b. 3rdâ€‘party JS é…å»¶
astro
ã‚³ãƒ”ãƒ¼ã™ã‚‹
ç·¨é›†ã™ã‚‹
<script>
if ('requestIdleCallback' in window) {
  requestIdleCallback(()=> import('/js/videoCarousel.js'));
} else {
  setTimeout(()=> import('/js/videoCarousel.js'), 2000);
}
</script>
3â€‘c. A11y quickâ€‘win
astro
ã‚³ãƒ”ãƒ¼ã™ã‚‹
ç·¨é›†ã™ã‚‹
<button aria-label="Toggle language menu">ğŸŒ</button>
<nav aria-label="Main"></nav>
4. CI ã« Lighthouse å®Ÿè¡Œã‚’çµ„ã¿è¾¼ã‚€ï¼ˆæ¨å¥¨ï¼‰
.github/workflows/lhci.yml

yaml
ã‚³ãƒ”ãƒ¼ã™ã‚‹
ç·¨é›†ã™ã‚‹
name: Lighthouse CI
on: pull_request
jobs:
  lhci:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v2
        with: { version: 9 }
      - run: pnpm install && pnpm run build
      - run: npx lhci autorun --collect.staticDistDir=dist
PR ã§ 90 æœªæº€ãªã‚‰èµ¤ãè¡¨ç¤º â†’ å“è³ªã‚²ãƒ¼ãƒˆã«ã€‚

5. å®Œäº†åˆ¤å®š
lhci autorun HTML ãƒ¬ãƒãƒ¼ãƒˆã§ã™ã¹ã¦ â‰¥â€¯90

å®Ÿæ©Ÿï¼ˆãƒ¢ãƒã‚¤ãƒ« 4Gï¼‰ã§ /services/ ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒãŒ <â€¯2â€¯s ã§è¡¨ç¤º

ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ Tab ã§å…¨ãƒœã‚¿ãƒ³ãŒãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯è¦– & ãƒ©ãƒ™ãƒ«èª­ã¿ä¸Šã’

Lighthouse â€œLowâ€‘contrast textâ€ è­¦å‘Š 0 ä»¶

ä½œæ¥­å¾Œâ€¦
pnpm run build â†’ npx lhci autorun

ã‚¹ã‚³ã‚¢ã‚¹ã‚¯ã‚·ãƒ§ã‚’ç¢ºèª

ã€ŒLighthouse OKã€ ã¨ã ã‘è¿”ä¿¡ã—ã¦ãã ã•ã„ã€‚
â€‘ ãã‚Œã§ Stepâ€¯6 å®Œäº† â†’ æ¬¡ã¯ Stepâ€¯7 GitHubâ€¯Pages CI/CD ã®è¨­å®šã‚¬ã‚¤ãƒ‰ã«é€²ã¿ã¾ã™ã€‚