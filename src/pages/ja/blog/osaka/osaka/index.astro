---
import BaseLayout from '../../../../../layouts/BaseLayout.astro';
import BlogModal from '../../../../../components/BlogModal.astro';

const title = "å¤§é˜ªå¸‚ã§ã®æš®ã‚‰ã— - å¤–å›½äººå‘ã‘ç”Ÿæ´»æƒ…å ±";
const description = "å¤§é˜ªå¸‚ã§ã®å¤–å›½äººå‘ã‘ç”Ÿæ´»æƒ…å ±ã€‚æ¢…ç”°ã€é›£æ³¢ã€å¤©ç‹å¯ºã‹ã‚‰ä½å‰ã€è¥¿æˆã¾ã§ã€é˜²ç½ã€ã‚¤ãƒ³ãƒ•ãƒ©ã€ç”Ÿæ´»ã‚³ã‚¹ãƒˆãªã©è©³ç´°æƒ…å ±ã‚’ãŠå±Šã‘ã€‚";
const lang = "ja";

// ã‚¿ãƒ–ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®å®šç¾©
const tabCategories = {
  "all": { name: "ã™ã¹ã¦", icon: "ğŸ“‹", color: "gray" },
  "location": { name: "åœ°åŸŸæƒ…å ±", icon: "ğŸ—ºï¸", color: "blue" },
  "access": { name: "ã‚¢ã‚¯ã‚»ã‚¹", icon: "ğŸš‡", color: "green" },
  "international": { name: "å›½éš›å¯¾å¿œ", icon: "ğŸŒ", color: "purple" },
  "family": { name: "å­è‚²ã¦ãƒ»æ•™è‚²", icon: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦", color: "pink" },
  "convenience": { name: "ç”Ÿæ´»åˆ©ä¾¿æ€§", icon: "ğŸª", color: "indigo" },
  "cost": { name: "ã‚³ã‚¹ãƒˆ", icon: "ğŸ’°", color: "yellow" },
  "safety": { name: "å®‰å…¨æ€§", icon: "ğŸ›¡ï¸", color: "red" },
  "future": { name: "å°†æ¥æ€§", icon: "ğŸ—ï¸", color: "teal" }
};

// è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ¼æƒ…å ±ä»˜ãï¼‰
const articles = [
  {
    id: "article-01",
    icon: "ğŸ›¡ï¸",
    title: "é˜²ç½ï¼šåœ°éœ‡ãƒ»ç½å®³å¯¾ç­–",
    description: "å¤§é˜ªå¸‚ã®åœ°éœ‡ãƒªã‚¹ã‚¯ã€é¿é›£å ´æ‰€ã€é˜²ç½å¯¾ç­–ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚",
    date: "2024-01-15",
    categories: ["safety"],
    readTime: "8åˆ†"
  },
  {
    id: "article-02", 
    icon: "ğŸ¥",
    title: "ç”Ÿæ´»ã‚¤ãƒ³ãƒ•ãƒ©ï¼šç—…é™¢ãƒ»å­¦æ ¡",
    description: "å¤–å›½èªå¯¾å¿œã®ç—…é™¢ã€å›½éš›å­¦æ ¡ã€å…¬å…±æ–½è¨­ãªã©ã®ç”Ÿæ´»ã‚¤ãƒ³ãƒ•ãƒ©æƒ…å ±ã€‚",
    date: "2024-01-18",
    categories: ["convenience", "international"],
    readTime: "6åˆ†"
  },
  {
    id: "article-03",
    icon: "ğŸ’°",
    title: "ç”Ÿæ´»ã‚³ã‚¹ãƒˆï¼šå®¶è³ƒãƒ»å…‰ç†±è²»",
    description: "å¤§é˜ªå¸‚ã®å®¶è³ƒç›¸å ´ã€å…‰ç†±è²»ã€æ—¥ç”¨å“ã®ä¾¡æ ¼ãªã©ã€ç”Ÿæ´»ã‚³ã‚¹ãƒˆã‚’è©³ã—ãåˆ†æã€‚",
    date: "2024-01-22",
    categories: ["cost"],
    readTime: "10åˆ†"
  },
  {
    id: "article-04",
    icon: "ğŸ—ï¸",
    title: "å†é–‹ç™ºãƒ»éƒ½å¸‚è¨ˆç”»",
    description: "å¤§é˜ªå¸‚ã®å†é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„éƒ½å¸‚è¨ˆç”»ã€ä»Šå¾Œã®ç™ºå±•äºˆå®šã«ã¤ã„ã¦ã€‚",
    date: "2024-01-25",
    categories: ["future"],
    readTime: "7åˆ†"
  },
  {
    id: "article-05",
    icon: "ğŸ“œ",
    title: "æ³•åˆ¶åº¦ï¼šå¤–å›½äººã®æ¨©åˆ©",
    description: "å¤–å›½äººã®ä¸å‹•ç”£è³¼å…¥ã€è³ƒè²¸å¥‘ç´„ã€å„ç¨®æ‰‹ç¶šãã«é–¢ã™ã‚‹æ³•çš„æƒ…å ±ã€‚",
    date: "2024-01-28",
    categories: ["cost", "international"],
    readTime: "12åˆ†"
  },
  {
    id: "article-06",
    icon: "ğŸ“·",
    title: "ç¾åœ°èª¿æŸ»ãƒ¬ãƒãƒ¼ãƒˆ",
    description: "å®Ÿéš›ã«å¤§é˜ªå¸‚ã‚’æ­©ã„ã¦èª¿æŸ»ã—ãŸç¾åœ°ãƒ¬ãƒãƒ¼ãƒˆã€‚å†™çœŸã¨å‹•ç”»ã§è¡—ã®æ§˜å­ã‚’ã”ç´¹ä»‹ã€‚",
    date: "2024-02-01",
    categories: ["location"],
    readTime: "15åˆ†"
  }
];
---

<BaseLayout {title} {description} {lang}>
  <!-- Breadcrumb -->
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
    <ol class="flex items-center space-x-2 text-sm text-gray-600">
      <li><a href="/ja/" class="hover:text-orange-600">ãƒ›ãƒ¼ãƒ </a></li>
      <li><span class="mx-2">/</span></li>
      <li><a href="/ja/blog/" class="hover:text-orange-600">åœ°åŸŸåˆ¥ç”Ÿæ´»æƒ…å ±</a></li>
      <li><span class="mx-2">/</span></li>
      <li><a href="/ja/blog/osaka/" class="hover:text-orange-600">å¤§é˜ªåºœ</a></li>
      <li><span class="mx-2">/</span></li>
      <li class="text-gray-900 font-medium">å¤§é˜ªå¸‚</li>
    </ol>
  </nav>

  <!-- Compact Hero Section -->
  <section class="bg-gradient-to-br from-red-600 to-red-700 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-white">
      <div class="text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">
          ğŸ¯ å¤§é˜ªå¸‚ã§ã®æš®ã‚‰ã— - ç”Ÿæ´»æƒ…å ±
        </h1>
        <p class="text-lg opacity-90 max-w-2xl mx-auto">
          å¤–å›½äººå‘ã‘ã®è©³ç´°ãªç”Ÿæ´»æƒ…å ±ã‚’åˆ†é‡åˆ¥ã«ã¾ã¨ã‚ã¾ã—ãŸ
        </p>
        <div class="mt-6 flex flex-wrap justify-center gap-4 text-sm">
          <span class="bg-white/20 px-3 py-1 rounded-full">ğŸ‘¥ å¤–å›½äººäººå£ 4.9%</span>
          <span class="bg-white/20 px-3 py-1 rounded-full">ğŸ’° å®¶è³ƒç›¸å ´ 5.8ä¸‡å††</span>
          <span class="bg-white/20 px-3 py-1 rounded-full">ğŸš‡ ã‚¢ã‚¯ã‚»ã‚¹è‰¯å¥½</span>
        </div>
      </div>
    </div>
  </section>


  <!-- Articles Section with Tabs -->
  <section class="py-16 lg:py-24 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          å¤§é˜ªå¸‚ã®<span class="text-orange-600">ç”Ÿæ´»æƒ…å ±</span>
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã«æ•´ç†ã•ã‚ŒãŸè©³ç´°ãªç”Ÿæ´»æƒ…å ±
        </p>
      </div>

      <!-- Tab Navigation -->
      <div class="mb-8">
        <div class="flex flex-wrap justify-center gap-2 mb-6">
          {Object.entries(tabCategories).map(([key, category]) => (
            <button 
              class={`tab-button px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 ${key === 'all' ? 'bg-red-600 text-white' : 'bg-white text-gray-600 hover:bg-gray-100'}`}
              data-category={key}
            >
              <span class="mr-2">{category.icon}</span>
              {category.name}
              <span class="ml-2 text-xs bg-white/20 px-2 py-0.5 rounded-full" id={`count-${key}`}>
                {key === 'all' ? articles.length : articles.filter(article => article.categories.includes(key)).length}
              </span>
            </button>
          ))}
        </div>
      </div>

      <!-- Articles Grid -->
      <div class="grid md:grid-cols-2 gap-8" id="articles-container">
        {articles.map((article) => (
          <div 
            class="article-card bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 p-6 border border-gray-200"
            data-article-id={article.id}
            data-categories={article.categories.join(',')}
          >
            <div class="flex items-center mb-4">
              <span class="text-3xl mr-4">{article.icon}</span>
              <div class="flex-1">
                <h3 class="text-xl font-bold text-gray-900 mb-1">
                  {article.title}
                </h3>
                <div class="flex flex-wrap gap-1">
                  {article.categories.map((cat) => (
                    <span class={`text-xs px-2 py-1 rounded-full bg-${tabCategories[cat]?.color || 'gray'}-100 text-${tabCategories[cat]?.color || 'gray'}-800`}>
                      {tabCategories[cat]?.icon} {tabCategories[cat]?.name}
                    </span>
                  ))}
                </div>
              </div>
            </div>
            <p class="text-gray-600 mb-4">
              {article.description}
            </p>
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4 text-sm text-gray-500">
                <span>{new Date(article.date).toLocaleDateString('ja-JP')}</span>
                <span>ğŸ“– {article.readTime}</span>
              </div>
              <div class="flex items-center gap-2">
                <a 
                  href={`/ja/blog/osaka/osaka/${article.id}/`}
                  class="inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors"
                >
                  è¨˜äº‹ã‚’èª­ã‚€
                  <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- No Results Message -->
      <div id="no-results" class="text-center py-12 hidden">
        <div class="text-gray-400 text-6xl mb-4">ğŸ“</div>
        <h3 class="text-xl font-semibold text-gray-600 mb-2">è©²å½“ã™ã‚‹è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“</h3>
        <p class="text-gray-500">ä»–ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ãŠè©¦ã—ãã ã•ã„</p>
      </div>
    </div>
  </section>


  <!-- Modals -->
  {articles.map((article) => (
    <BlogModal article={article} cityName="å¤§é˜ªå¸‚" prefectureName="å¤§é˜ªåºœ" />
  ))}

  <!-- Tab Functionality Script -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
      // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—
      const tabButtons = document.querySelectorAll('.tab-button');
      const articleCards = document.querySelectorAll('.article-card');
      const noResultsDiv = document.getElementById('no-results');

      // ã‚¿ãƒ–ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
      function filterArticles(selectedCategory) {
        let visibleCount = 0;

        articleCards.forEach(card => {
          const categories = card.getAttribute('data-categories').split(',');
          const shouldShow = selectedCategory === 'all' || categories.includes(selectedCategory);

          if (shouldShow) {
            card.style.display = 'block';
            card.style.opacity = '0';
            setTimeout(() => {
              card.style.opacity = '1';
            }, 50);
            visibleCount++;
          } else {
            card.style.opacity = '0';
            setTimeout(() => {
              card.style.display = 'none';
            }, 200);
          }
        });

        // çµæœãªã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º/éè¡¨ç¤º
        if (visibleCount === 0) {
          noResultsDiv.classList.remove('hidden');
        } else {
          noResultsDiv.classList.add('hidden');
        }

        // ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®èª¿æ•´
        const container = document.getElementById('articles-container');
        if (visibleCount === 1) {
          container.style.gridTemplateColumns = '1fr';
          container.style.maxWidth = '600px';
          container.style.margin = '0 auto';
        } else {
          container.style.gridTemplateColumns = '';
          container.style.maxWidth = '';
          container.style.margin = '';
        }
      }

      // ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
      function updateActiveTab(selectedCategory) {
        tabButtons.forEach(button => {
          const category = button.getAttribute('data-category');
          if (category === selectedCategory) {
            button.classList.remove('bg-white', 'text-gray-600');
            button.classList.add('bg-red-600', 'text-white');
          } else {
            button.classList.remove('bg-red-600', 'text-white');
            button.classList.add('bg-white', 'text-gray-600');
          }
        });
      }

      // ã‚¿ãƒ–ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
      tabButtons.forEach(button => {
        button.addEventListener('click', function() {
          const selectedCategory = this.getAttribute('data-category');
          
          // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã‚’æ›´æ–°
          updateActiveTab(selectedCategory);
          
          // è¨˜äº‹ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
          filterArticles(selectedCategory);

          // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
          this.style.transform = 'scale(0.95)';
          setTimeout(() => {
            this.style.transform = 'scale(1)';
          }, 100);
        });
      });

      // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
      document.addEventListener('keydown', function(e) {
        if (e.key >= '1' && e.key <= '9') {
          const index = parseInt(e.key) - 1;
          if (tabButtons[index]) {
            tabButtons[index].click();
          }
        }
      });

      // åˆæœŸçŠ¶æ…‹ï¼šã€Œã™ã¹ã¦ã€ã‚’é¸æŠ
      filterArticles('all');
      updateActiveTab('all');

      // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŠ¹æœ
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.animation = 'fadeInUp 0.6s ease-out';
          }
        });
      }, { threshold: 0.1 });

      articleCards.forEach(card => {
        observer.observe(card);
      });
    });

    // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .article-card {
        transition: all 0.3s ease;
      }
      
      .tab-button {
        transition: all 0.2s ease;
      }
      
      .tab-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      }
    `;
    document.head.appendChild(style);
  </script>
</BaseLayout>