---
import BaseLayout from '../../../../../layouts/BaseLayout.astro';
import BlogModal from '../../../../../components/BlogModal.astro';

const title = "大阪市での暮らし - 外国人向け生活情報";
const description = "大阪市での外国人向け生活情報。梅田、難波、天王寺から住吉、西成まで、防災、インフラ、生活コストなど詳細情報をお届け。";
const lang = "ja";

// タブカテゴリーの定義
const tabCategories = {
  "all": { name: "すべて", icon: "📋", color: "gray" },
  "location": { name: "地域情報", icon: "🗺️", color: "blue" },
  "access": { name: "アクセス", icon: "🚇", color: "green" },
  "international": { name: "国際対応", icon: "🌍", color: "purple" },
  "family": { name: "子育て・教育", icon: "👨‍👩‍👧‍👦", color: "pink" },
  "convenience": { name: "生活利便性", icon: "🏪", color: "indigo" },
  "cost": { name: "コスト", icon: "💰", color: "yellow" },
  "safety": { name: "安全性", icon: "🛡️", color: "red" },
  "future": { name: "将来性", icon: "🏗️", color: "teal" }
};

// 記事データ（カテゴリー情報付き）
const articles = [
  // 安全性カテゴリー
  {
    id: "article-01",
    icon: "🛡️",
    title: "防災：地震・災害対策",
    description: "大阪市の地震リスク、避難場所、防災対策について詳しく解説します。",
    date: "2024-01-15",
    categories: ["safety"],
    readTime: "8分",
    image: "https://images.unsplash.com/photo-1609173795284-7b5d6ee9c4e1?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-11",
    icon: "🚨",
    title: "治安情報と安全対策",
    description: "大阪市各区の治安状況と外国人向け安全対策ガイド。",
    date: "2024-02-10",
    categories: ["safety"],
    readTime: "10分",
    image: "https://images.unsplash.com/photo-1569163139394-de4798aa62b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-12",
    icon: "🏥",
    title: "緊急時の医療体制",
    description: "救急病院の場所と外国語対応可能な緊急医療サービス。",
    date: "2024-02-12",
    categories: ["safety", "international"],
    readTime: "6分",
    image: "https://images.unsplash.com/photo-1519494026892-80bbd2d6fd0d?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  // 生活利便性カテゴリー
  {
    id: "article-02",
    icon: "🏥",
    title: "生活インフラ：病院・学校",
    description: "外国語対応の病院、国際学校、公共施設などの生活インフラ情報。",
    date: "2024-01-18",
    categories: ["convenience", "international"],
    readTime: "6分",
    image: "https://images.unsplash.com/photo-1586015555751-63bb77f4322a?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-13",
    icon: "🛒",
    title: "スーパー・商店街ガイド",
    description: "外国食材が買える店舗や日常の買い物に便利な商業施設。",
    date: "2024-02-05",
    categories: ["convenience"],
    readTime: "7分",
    image: "https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-14",
    icon: "🚇",
    title: "交通機関の使い方",
    description: "大阪メトロ、JR、私鉄の乗り方と外国人向け割引情報。",
    date: "2024-02-08",
    categories: ["convenience", "access"],
    readTime: "9分",
    image: "https://images.unsplash.com/photo-1555854877-bab0e564b8d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  // コストカテゴリー
  {
    id: "article-03",
    icon: "💰",
    title: "生活コスト：家賃・光熱費",
    description: "大阪市の家賃相場、光熱費、日用品の価格など、生活コストを詳しく分析。",
    date: "2024-01-22",
    categories: ["cost"],
    readTime: "10分",
    image: "https://images.unsplash.com/photo-1554224155-6726b3ff858f?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-15",
    icon: "🏠",
    title: "住居探しのコツと費用",
    description: "外国人向け賃貸物件の探し方と初期費用の詳細解説。",
    date: "2024-02-15",
    categories: ["cost"],
    readTime: "12分",
    image: "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-16",
    icon: "💳",
    title: "銀行口座と金融サービス",
    description: "外国人が利用できる銀行と金融サービスの比較。",
    date: "2024-02-18",
    categories: ["cost", "international"],
    readTime: "8分",
    image: "https://images.unsplash.com/photo-1601597111158-2fceff292cdc?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  // 将来性カテゴリー
  {
    id: "article-04",
    icon: "🏗️",
    title: "再開発・都市計画",
    description: "大阪市の再開発プロジェクトや都市計画、今後の発展予定について。",
    date: "2024-01-25",
    categories: ["future"],
    readTime: "7分",
    image: "https://images.unsplash.com/photo-1487958449943-2429e8be8625?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-17",
    icon: "🌆",
    title: "2025年万博と街の変化",
    description: "大阪・関西万博に向けた街の変化と外国人への影響。",
    date: "2024-02-20",
    categories: ["future"],
    readTime: "11分",
    image: "https://images.unsplash.com/photo-1590650213165-c1fef80648c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  // 国際対応カテゴリー
  {
    id: "article-05",
    icon: "📜",
    title: "法制度：外国人の権利",
    description: "外国人の不動産購入、賃貸契約、各種手続きに関する法的情報。",
    date: "2024-01-28",
    categories: ["cost", "international"],
    readTime: "12分",
    image: "https://images.unsplash.com/photo-1589829545856-d10d557cf95f?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-18",
    icon: "🌐",
    title: "外国人コミュニティと支援",
    description: "大阪の外国人コミュニティと利用できる支援サービス。",
    date: "2024-02-22",
    categories: ["international"],
    readTime: "9分",
    image: "https://images.unsplash.com/photo-1529156069898-49953e39b3ac?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-19",
    icon: "📚",
    title: "日本語学習リソース",
    description: "大阪市内の日本語学校と無料学習プログラム。",
    date: "2024-02-25",
    categories: ["international", "family"],
    readTime: "7分",
    image: "https://images.unsplash.com/photo-1524383902853-6e464d9b9c8a?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  // 地域情報カテゴリー
  {
    id: "article-06",
    icon: "📷",
    title: "現地調査レポート",
    description: "実際に大阪市を歩いて調査した現地レポート。写真と動画で街の様子をご紹介。",
    date: "2024-02-01",
    categories: ["location"],
    readTime: "15分",
    image: "https://images.unsplash.com/photo-1590559899731-a382839e5549?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-20",
    icon: "🏘️",
    title: "北区・中央区エリアガイド",
    description: "ビジネス街と繁華街が混在する都心エリアの詳細情報。",
    date: "2024-02-27",
    categories: ["location", "access"],
    readTime: "10分",
    image: "https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-21",
    icon: "🌸",
    title: "住吉区・東住吉区の魅力",
    description: "住宅地として人気の南部エリアの生活環境レポート。",
    date: "2024-03-01",
    categories: ["location", "family"],
    readTime: "8分",
    image: "https://images.unsplash.com/photo-1580478341304-e2337bbef8f7?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  // 子育て・教育カテゴリー
  {
    id: "article-22",
    icon: "🎒",
    title: "インターナショナルスクール",
    description: "大阪市内の国際学校と外国人向け教育施設の完全ガイド。",
    date: "2024-03-03",
    categories: ["family", "international"],
    readTime: "14分",
    image: "https://images.unsplash.com/photo-1580582932707-520aed937b7b?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-23",
    icon: "👶",
    title: "子育て支援と保育施設",
    description: "外国人家族向けの保育園、幼稚園、子育て支援サービス。",
    date: "2024-03-05",
    categories: ["family"],
    readTime: "11分",
    image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  // アクセスカテゴリー
  {
    id: "article-24",
    icon: "✈️",
    title: "空港アクセスガイド",
    description: "関西国際空港と伊丹空港への最適なアクセス方法。",
    date: "2024-03-07",
    categories: ["access"],
    readTime: "6分",
    image: "https://images.unsplash.com/photo-1436491865332-7a61a109cc05?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  },
  {
    id: "article-25",
    icon: "🚄",
    title: "新幹線と特急の利用法",
    description: "大阪から各地への移動に便利な新幹線と特急列車ガイド。",
    date: "2024-03-10",
    categories: ["access"],
    readTime: "8分",
    image: "https://images.unsplash.com/photo-1474487548417-781cb71495f3?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80"
  }
];
---

<BaseLayout {title} {description} {lang}>
  <!-- Breadcrumb -->
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
    <ol class="flex items-center space-x-2 text-sm text-gray-600">
      <li><a href="/ja/" class="hover:text-orange-600">ホーム</a></li>
      <li><span class="mx-2">/</span></li>
      <li><a href="/ja/blog/" class="hover:text-orange-600">地域別生活情報</a></li>
      <li><span class="mx-2">/</span></li>
      <li><a href="/ja/blog/osaka/" class="hover:text-orange-600">大阪府</a></li>
      <li><span class="mx-2">/</span></li>
      <li class="text-gray-900 font-medium">大阪市</li>
    </ol>
  </nav>

  <!-- Compact Hero Section -->
  <section class="bg-gradient-to-br from-red-600 to-red-700 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-white">
      <div class="text-center">
        <h1 class="text-3xl md:text-4xl font-bold mb-4">
          🏯 大阪市での暮らし - 生活情報
        </h1>
        <p class="text-lg opacity-90 max-w-2xl mx-auto">
          外国人向けの詳細な生活情報を分野別にまとめました
        </p>
        <div class="mt-6 flex flex-wrap justify-center gap-4 text-sm">
          <span class="bg-white/20 px-3 py-1 rounded-full">👥 外国人人口 4.9%</span>
          <span class="bg-white/20 px-3 py-1 rounded-full">💰 家賃相場 5.8万円</span>
          <span class="bg-white/20 px-3 py-1 rounded-full">🚇 アクセス良好</span>
        </div>
      </div>
    </div>
  </section>


  <!-- Articles Section by Category -->
  <section class="py-16 lg:py-24 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          大阪市の<span class="text-orange-600">生活情報</span>
        </h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          外国人向けの生活情報をカテゴリー別にまとめました
        </p>
      </div>

      <!-- Categories with Articles -->
      <div class="space-y-12">
        {Object.entries(tabCategories).filter(([key]) => key !== 'all').map(([categoryKey, category]) => {
          const categoryArticles = articles.filter(article => article.categories.includes(categoryKey));
          if (categoryArticles.length === 0) return null;
          
          return (
            <div class="category-section">
              <!-- Category Header -->
              <div class="flex items-center justify-between mb-6">
                <div class="flex items-center">
                  <span class="text-3xl mr-3">{category.icon}</span>
                  <h3 class="text-2xl font-bold text-gray-900">{category.name}</h3>
                  <span class="ml-3 text-sm bg-gray-200 text-gray-700 px-3 py-1 rounded-full">
                    {categoryArticles.length}件の記事
                  </span>
                </div>
                <a 
                  href={`/ja/blog/osaka/osaka/category/${categoryKey}/`}
                  class="text-red-600 hover:text-red-700 font-medium flex items-center gap-1"
                >
                  もっと見る
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                  </svg>
                </a>
              </div>
              
              <!-- Articles Grid -->
              <div class="grid lg:grid-cols-3 gap-6">
                {categoryArticles.slice(0, 3).map((article) => (
                  <div class="article-item bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100">
                    <div class="flex h-32">
                      <div class="w-32 h-full flex-shrink-0 overflow-hidden">
                        <img 
                          src={article.image || 'https://images.unsplash.com/photo-1589451560115-9f86a404f3de?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80'}
                          alt={article.title}
                          class="w-full h-full object-cover"
                          loading="lazy"
                        />
                      </div>
                      <div class="flex-1 p-4">
                        <h4 class="font-semibold text-gray-900 mb-2 line-clamp-2 hover:text-red-600 transition-colors">
                          <a href={`/ja/blog/osaka/osaka/${article.id}/`}>
                            {article.title}
                          </a>
                        </h4>
                        <div class="flex flex-wrap gap-2 mb-2">
                          {article.categories.map((cat) => (
                            <a 
                              href={`/ja/blog/osaka/osaka/category/${cat}/`}
                              class={`text-xs px-2 py-1 rounded-full bg-${tabCategories[cat]?.color || 'gray'}-100 text-${tabCategories[cat]?.color || 'gray'}-700 hover:bg-${tabCategories[cat]?.color || 'gray'}-200 transition-colors`}
                            >
                              {tabCategories[cat]?.name}
                            </a>
                          ))}
                        </div>
                        <p class="text-gray-600 text-sm line-clamp-2">
                          {article.description}
                        </p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
              
            </div>
          );
        })}
      </div>
    </div>
  </section>


  <!-- Modals -->
  {articles.map((article) => (
    <BlogModal article={article} cityName="大阪市" prefectureName="大阪府" />
  ))}

  <!-- Smooth Scroll Animation Script -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
      // スムーズスクロール効果
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.animation = 'fadeInUp 0.6s ease-out';
          }
        });
      }, { threshold: 0.1 });

      const categoryArticles = document.querySelectorAll('.category-section article');
      categoryArticles.forEach(article => {
        observer.observe(article);
      });

      // カテゴリーセクションのアニメーション
      const categorySections = document.querySelectorAll('.category-section');
      categorySections.forEach((section, index) => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(30px)';
        setTimeout(() => {
          section.style.transition = 'all 0.8s ease-out';
          section.style.opacity = '1';
          section.style.transform = 'translateY(0)';
        }, index * 100);
      });
    });

    // CSS アニメーション
    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .category-section article {
        transition: all 0.3s ease;
      }
      
      .category-section article:hover {
        transform: translateY(-4px);
      }
      
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      
      .article-item:hover img {
        transform: scale(1.05);
      }
      
      .article-item img {
        transition: transform 0.3s ease;
      }
    `;
    document.head.appendChild(style);
  </script>
</BaseLayout>